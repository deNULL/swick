!function(){function t(t,e){return t.split("-").map((t,s)=>s||e?t[0].toUpperCase()+t.slice(1):t).join("")}function e(t,s,i=null){if(null===s||"object"!=typeof s)throw new Error("Unable to update a Model with "+s+". Expected an object.");let n={},o=0,r={},l=0,h={},c=0;for(let a in s){const f=s[a];let m;void 0===f?a in t&&(delete t[a],h[a]=!0,c++):i||t[a]instanceof y?(t[a]instanceof y||(n[a]=!0,o++,t[a]=new i(t[a])),m=t[a].set(f instanceof y?f.value:f)):null===f||"object"!=typeof f?t[a]!==f&&(a in t||(n[a]=!0,o++),t[a]=f,r[a]=!0,l++):(t[a]&&"object"==typeof t[a]||(t[a]={},n[a]=!0,o++),m=e(t[a],f)),m&&(n[a]=m.created,o+=m.creates,r[a]=m.changed,l+=m.changes,h[a]=m.deleted,c+=m.deletes)}return{created:n,creates:o,changed:r,changes:l,deleted:h,deletes:c}}function s(t){const e=Object.assign({},t.dataset);for(let t in e)""===e[t]&&(e[t]=!0);return new y(e)}[Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach((function(t){t.hasOwnProperty("remove")||Object.defineProperty(t,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){null!==this.parentNode&&this.parentNode.removeChild(this)}})}));const i=/\s+/,n=/[:.\/]+/;let o,r=0;const l=(t,e,s,n,o)=>{if(s&&"object"==typeof s){void 0!==n&&"context"in o&&void 0===o.context&&(o.context=n);for(let i in s)e=l(t,e,i,s[i],o)}else if(s&&i.test(s))for(let r of s.split(i))e=t(e,r,n,o);else e=t(e,s,n,o);return e},h=(t,e,s,i)=>{if(s){let o=t;if((e="all"===e?"*":e)&&n.test(e))for(let t of e.split(n))o=o[t]||(o[t]={});else o=o[e]||(o[e]={});((t,e,s,i)=>{const n=t[e="#"===e?"*":"+"===e?"?":e]||(t[e]=[]),o=i.context,r=i.ctx,l=i.listening;l&&l.count++,n.push({callback:s,context:o,ctx:o||r,listening:l})})(o,"$",s,i)}return t},c=(t,e,s,i,n)=>{let o;if(e)if(e.length){const s=e.shift();"**"==s?(o=Object.keys(t),e=null):o=[s]}else o=["$"];else o=Object.keys(t);for(let r of o){const o=t[r];if(o)if("$"===r){const e=[];for(let t of o)if(s&&s!==t.callback&&s!==t.callback._callback||i&&i!==t.context)e.push(t);else{const e=t.listening;e&&e.off(r,s)}e.length?t[r]=e:delete t[r]}else c(o,e,s,i,n),Object.keys(o).length||delete t[r]}},a=(t,e,s,{context:i,listeners:o})=>{if(t){if(e||i||s)return c(t,(e="all"===e?"*":e)&&e.split(n),s,i,o),t;for(let t of o)t.cleanup()}},f=(t,e,s,i)=>{const n=t[s.shift()];s.length?(n&&f(n,e,s.slice(),i),t["?"]&&f(t["?"],e,s,i)):n&&n.$&&d(n.$,i.concat([e])),t["*"]&&d(t["*"].$,i.concat([e]))},m=(t,e,s,i)=>{if(Array.isArray(s))for(let o of s)f(t,e,o.split(n),i);else for(let n in s){const o=s[n],r=t[n];!0===o?r&&r.$&&d(r.$,i.concat([e])):(r&&m(r,e,o,i),t["?"]&&m(t["?"],e,o,i))}t["*"]&&d(t["*"].$,i.concat([e]))},d=(t,e)=>{let s,i=-1,n=t.length,o=e[0],r=e[1],l=e[2];switch(e.length){case 0:for(;++i<n;)(s=t[i]).callback.call(s.ctx);return;case 1:for(;++i<n;)(s=t[i]).callback.call(s.ctx,o);return;case 2:for(;++i<n;)(s=t[i]).callback.call(s.ctx,o,r);return;case 3:for(;++i<n;)(s=t[i]).callback.call(s.ctx,o,r,l);return;default:for(;++i<n;)(s=t[i]).callback.apply(s.ctx,e);return}},u=(t,e,s,i)=>{if(s){let n=!1;const o=t[e]=function(){n||(n=!0,i(e,o),s.apply(this,arguments))};o._callback=s}return t};class p{on(t,e,s){(this._events=l(h,this._events||{},t,e,{context:s,ctx:this,listening:o}),o)&&((this._listeners||(this._listeners={}))[o.id]=o,o.interop=!1);return this}listenTo(t,e,s){if(!t)return this;const i=t._listenId||(t._listenId=++r),n=this._listeningTo||(this._listeningTo={});let l=o=n[i];l||(this._listenId||(this._listenId=++r),l=o=n[i]=new Listening(this,t));const h=((t,e,s,i)=>{try{t.on(e,s,i)}catch(t){return t}})(t,e,s,this);if(o=void 0,h)throw h;return l.interop&&l.on(e,s),this}off(t,e,s){return this._events?(this._events=l(a,this._events,t,e,{context:s,listeners:this._listeners}),this):this}stopListening(t,e,s){const i=this._listeningTo;if(!i)return this;const n=t?[t._listenId]:Object.keys(i);for(var o=0;o<n.length;o++){var r=i[n[o]];if(!r)break;r.obj.off(e,s,this),r.interop&&r.off(e,s)}return 0===Object.keys(i).length&&(this._listeningTo=void 0),this}once(t,e,s){const i=l(u,{},t,e,this.off.bind(this));return"string"==typeof t&&null==s&&(e=void 0),this.on(i,e,s)}listenToOnce(t,e,s){const i=l(u,{},e,s,this.stopListening.bind(this,t));return this.listenTo(t,i)}trigger(t,...e){return this._events&&((t,e,s)=>{t&&("string"==typeof e?f(t,e,e.split(n),s):m(t,e,e,s))})(this._events,t,e),this}}p.prototype.bind=p.prototype.on,p.prototype.unbind=p.prototype.off;class g extends p{mount(t){return(t=t||this._stub)&&t.parentNode&&t.parentNode.replaceChild(this.el,t),this}insert(t,e){return t.insertBefore(this.el,e),this}unmount(){return this.el.parentNode?(this._stub=this._stub||document.createComment(""),this.el.parentNode.replaceChild(this._stub,this.el),this):this}remove(){this.off(),this.el.remove(),x.instances.delete(this.el)}childContent(t,e){const s=this[t];s instanceof g?s.data.set("content",e):s.textContent=e}childHTML(t,e){const s=this[t];s instanceof g?s.data.set("html",e):s.innerHTML=e}childToggle(t,e,s){const i=this[t];i instanceof g?i.data.set(e,s):i.classList.toggle("is-"+e.split(/(?=[A-Z])/g).map(t=>t.toLowerCase()).join("-"),!!s)}childProp(t,e,s){const i=this[t];if(i instanceof g){const t={};t[e]=s,i.data.set(t)}else i[e]=s}watch(...t){const e=t[0]&&t[0].constructor===Object?t.shift():{};let s=[];for(;t[t.length-1]instanceof Function||t[t.length-1]&&t[t.length-1].constructor===Object;)s.unshift(t.pop());const i=s[0],n=Array.isArray(t[0]);let o,r=n?t[0]:[t];const l=e.initial?e.initial:{},h={},c=t=>(...e)=>{const s=this.watch({initial:{index:t}},...e);return h[t]=h[t]||[],h[t].push(s),s},a=t=>{if(h[t]){for(let e of h[t])e.unwatch();delete h[t]}};if(!n&&r[0][0]instanceof w){const t=r[0][0],e=[],n=(t,n,o)=>{const r=c(n),l=i.add&&i.add.call(this,t,n,o,r);l&&(s.length>1?r.apply(this,l.concat(s.slice(1))):(e[n]=l,i.container&&i.container.insertBefore(l.el||l,e[n+1]&&e[n+1].el||e[n+1]||null)))};o=(t,{add:s,move:o,remove:r})=>{if(r)for(let s in r){const n=parseInt(s);a(n);const o=i.remove&&i.remove.call(this,r[n],n,t);e[n]&&!1!==o&&(e[n].remove&&e[n].remove(),delete e[n])}if(o){const s={},n={},r=[];for(let l in o){const c=parseInt(l);if(r.push(c),o[c]in h){s[c]=h[o[c]];for(let t of h[o[c]])t.update("index",c);delete h[o[c]]}i.move&&i.move(t[c],c,o[c],t),o[c]in e&&(n[c]=e[o[c]],delete e[o[c]])}for(let t=r.length-1;t>=0;t--){const o=r[t];o in s?h[o]=s[o]:delete h[o],o in n?(e[o]=n[o],i.container&&i.container.insertBefore(e[o].el||e[o],e[o+1]&&e[o+1].el||e[o+1]||null)):delete e[o]}}if(s){const e=[];for(let t in s)e.push(parseInt(t));for(let i=e.length-1;i>=0;i--)n(s[e[i]],e[i],t)}console.log(e)},t.on("*",o);for(let e=0;e<t.items.length;e++)n(t.items[e],e,t.items)}else{o=()=>{const t=[];for(let e of r){const s=e[0];if("string"==typeof s)t.push(l[s]);else if(s instanceof y)t.push(e.length>1&&!Array.isArray(e[1])?s.get(e[1]):s.value);else if(s instanceof b){const i=e[1];if(Array.isArray(i)){const e={};for(let t of i)e[t]=s.get(t);t.push(e)}else t.push(s.get(i))}}a(0);const e=c(0);t.push(e);const n=i.apply(this,t);n&&s.length>1&&e.apply(this,n.concat(s.slice(1)))};for(let t of r){const e=t[0];if("string"==typeof e);else if(e instanceof y){const s=t.length>1?t[1]:"*";e.on("change:"+(Array.isArray(s)?"("+s.join(",")+")":s),o)}else{if(!(e instanceof b))throw e instanceof w?new Error("A list can only be a single data source."):(console.error("Unsupported data source: ",e,". Expected a Model, Store or List instance."),new Error("Unsupported data source"));{const s=t[1],i=t.length>2?t[2]:"*";e.on("change:"+(Array.isArray(s)?"("+s.join(",")+")":s)+":"+(Array.isArray(i)?"("+i.join(",")+")":i),o)}}}o()}return{update:(t,e)=>{l[t]!==e&&(l[t]=e,o())},unwatch:()=>{for(let t in h)for(let e of h[t])e.unwatch();this.off(null,o)}}}}class v extends g{constructor(t,e,s,i,n){super(),this.parent=t,this.childName=e,this.compName=s,this.data=i,this.el=document.createComment(""),n.parentNode.replaceChild(this.el,n)}mount(){const t=this.parent[this.childName]=new x.components[this.compName](this.data);return t.mount(this.el),t}unmount(){}}class y extends p{constructor(t){if(super(),void 0!==t&&(!t||t.constructor!==Object))throw new Error("Unable to create a Model from "+t+". Expected an object.");this.value=t||{}}id(){return this.value.id}get(t){return function t(e,s){if(!s)return e;const i=e[(s=Array.isArray(s)?s:s.split(".")).shift()];return s.length&&i?t(i,s):i||null}(this.value,t)}set(t,s){void 0===s&&(s=t,t=null);const i=e(this.value,s);if(i.creates||i.changes||i.deletes){const t={};i.creates&&(t.create=i.created),i.changes&&(t.change=i.changed),i.deletes&&(t.delete=i.deleted),this.trigger(t,this.value)}return i}}class b extends p{constructor(t,e=y){if(super(),this.items={},this.model=e,Array.isArray(t))for(let s of t)this.items[this.modelId(s)]=s instanceof y?s:new e(s);else if(t instanceof Object)for(let s in t){const i=t[s];this.items[s]=i instanceof y?i:new e(i)}}modelId(t){return t instanceof this.model?t.id():t.id}get(t,e){const s=this.items[t]||null;return e?s&&s.get(e):s}put(t){Array.isArray(t)||(t=[t]);const e={};for(let s of t)e[this.modelId(s)]=s;return this.set(e)}set(t,s,i){let n={};void 0===s&&void 0===i?n=t:void 0===i?(n[t]=s,s=null):n[t]=i;const o=e(this.items,n,this.model);if(o.creates||o.changes||o.deletes){const t={};o.creates&&(t.create=o.created),o.changes&&(t.change=o.changed),o.deletes&&(t.delete=o.deleted),this.trigger(t,this.value)}}}class w extends p{constructor(t=[],e=null){if(super(),this.filtered={},this.items=t,e instanceof y)this.model=e,this.items=t.map(t=>t instanceof e?t:new e(t));else if(e instanceof b||e instanceof Function)this.store=e;else if(null!==e)throw new Error("Unable to use "+e+" as a backing store for List. Expected Model, Store or a function (id => model).")}normaliseItems(t){return this.model?t.map(t=>t instanceof this.model?t:new this.model(t)):t}idAt(t){return this.model?items[t].id():items[t]}get(t){const e=this.items[t];return this.store?this.store instanceof Function?this.store(e):this.store.get(e):e}set(t,e,s){if(void 0===s){s=this.normaliseItems([e])[0];const i={add:{},remove:{}};i.remove[t]=this.items[t],i.add[t]=s,this.items[t]=s,this.trigger(i,this.items)}else if(this.store)this.store.set(this.items[t],e,s);else{if(!this.items[t].set)throw new Error("Unable to set "+s+" for path "+e+" in "+this.items[t]+", as it has no set method.");this.items[t].set(e,s)}}splice(t,e,s=[]){(t=Math.min(t,this.items.length))<0&&(t=Math.max(0,this.items.length+t)),e=Math.min(Math.max(0,e),this.items.length-t),s=this.normaliseItems(s);const i={};if(e>0){i.remove={};for(let s=t;s<e;s++)i.remove[s]=this.items[s]}if(e!==s.length&&t<this.items.length){i.move={};for(let n=t+e;n<this.items.length;n++)i.move[n+s.length-e]=n}if(s.length>0){i.add={};for(let e=0;e<s.length;e++)i.add[t+e]=s[e]}this.items.splice(t,e,...s),this.trigger(i,this.items)}remove(t){const e={},s={remove:{}},i=[];for(let s of t)e[s]=!0;let n=0;for(let t=0;t<this.items.length;t++)this.idAt(t)in e?(i.push(this.items[t]),s.remove[t]=this.items[t]):(n<t&&(this.items[n]=this.items[t],s.move||(s.move={}),s.move[n]=t),n++);return this.items.length=n,this.trigger(s,this.items),i}removeAt(t){const e={},s={remove:{}},i=[];for(let s of t)e[s]=!0;let n=0;for(let t=0;t<this.items.length;t++)t in e?(i.push(this.items[t]),s.remove[t]=this.items[t]):(n<t&&(this.items[n]=this.items[t],s.move||(s.move={}),s.move[n]=t),n++);return this.items.length=n,this.trigger(s,this.items),i}reset(t){this.splice(0,this.items.length,t)}insert(t,e){this.splice(t,0,e)}append(t){this.splice(this.items.length,0,t)}prepend(t){this.splice(0,0,t)}push(...t){this.splice(this.items.length,0,t)}unshift(...t){this.splice(0,0,t)}shift(t=1){return this.splice(0,t)}pop(t=1){return this.splice(this.items.length-t,t)}swap(t,e){if(t=Math.max(0,Math.min(t,this.items.length-1)),(e=Math.max(0,Math.min(e,this.items.length-1)))!==t){const s={move:{}};s.move[e]=t,s.move[t]=e;const i=this.items[t];this.items[t]=this.items[e],this.items[e]=i,this.trigger(s,this.items)}}move(t,e){if(t=Math.max(0,Math.min(t,this.items.length-1)),(e=Math.max(0,Math.min(e,this.items.length-1)))!==t){const s={move:{}},i=this.items[t];if(e<t)for(let i=t;i>e;i--)s.move[i]=i-1,this.items[i]=this.items[i-1];else for(let i=t;i<e;i++)s.move[i]=i+1,this.items[i]=this.items[i+1];s.move[e]=t,this.items[e]=i,this.trigger(s,this.items)}}reorder(t){const e=[],s={move:{}};for(let i=0;i<Math.min(this.items.length,t.length);i++)e[i]=this.items[t[i]],s.move[i]=t[i];this.items=e,this.trigger(s,this.items)}sort(t,e){}filter(t=null){this.filterFn=t;const e={},s={};if(t)for(let i=0;i<this.items.length;i++){const n=this.idAt(i),o=!(n in this.filtered),r=t.call(this,this.get(i),i,this.items);o!=r&&(e[n]=r,s[n]=!0,r?delete this.filtered[n]:this.filtered[n]=!0)}else{for(let t in this.filtered)e[t]=s[t]=!0;this.filtered={}}this.trigger({filter:s},e)}}const x={Eventer:p,Model:y,Store:b,List:w,Component:g,templates:{},components:{},instances:new WeakMap};x.component=(e,i,n)=>{const o=n.name||t(e,!0),r=function(o,r){null!==o&&o.constructor!==Object||(o=new y(o||{})),this.el=r||(n.el||x.templates[e]).cloneNode(!0),x.instances.set(this.el,this);const l=this.el.querySelectorAll(`[class^="${e}__"]`);for(let i of l){const n=t(i.classList[0].substr(e.length+2));let o=i;if(i.classList[1]){const e=t(i.classList[1],!0);if(e in x.components){const t=s(i);t.get("isUnmounted")?o=new v(this,n,e,t,i):(o=new x.components[e](t),o.mount(i))}}this[n]=o}this.data=o,i&&i.call(this,o,r,this.watch.bind(this))};return Object.defineProperty(r,"name",{value:o}),r.prototype=new x.Component,r.props=n.props||{},x.components[o]=r,r},x.registerTemplates=t=>{for(t||(t=document.getElementById("templates"));t.childElementCount;){const e=t.firstElementChild,s=e.classList[0];x.templates[s]=e,e.remove()}t.remove()};const A=[];let _=!1;x.mount=e=>{if(_){e=e||document.getElementById("app");for(let i of e.children){if(i.classList[0]){const e=t(i.classList[0],!0);if(e in x.components){const t=s(i),n=new x.components[e](t,t.get("isRendered")?i:null);!t.get("isRendered")&&n.mount(i);continue}}x.mount(i)}}else A.push(x.mount.bind(this,e))},document.addEventListener("DOMContentLoaded",()=>{x.registerTemplates(document.getElementById("templates")),_=!0;for(let t of A)t()}),window.Swick=x,"Sw"in window||(window.Sw=x)}();